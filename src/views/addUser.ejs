<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Add</title>
</head>
<body>
    <form id ="form">
        <label>
            Name:
            <input type="text" name="name"  value="<%= locals.name %>" />
        </label><br/>
        <label>
            Email:
            <input type="email" name="email"  value="<%= email %>" />
        </label><br/>
        <label>
            Password:
            <input type="password" name="password" value="<%= password %>" />
        </label><br/>
        <label>
            Phone Number:
            <input type="text" name="phonenumber"  value="<%= phonenumber %>"/>
        </label><br/>
        <label>
            Role:
            <input type="text" name="role"  value="<%= role %>"/>
        </label><br/>
        <label>
            Age:
            <input type="number" name="age" value="<%= age %>" />
        </label><br/>
        <label>
            Sex:
            <input type="text" name="sex"  value="<%= sex %>"/>
        </label><br/>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    <script>
      const form = document.querySelector('form')
      form.addEventListener('submit',(e)=>{
        const fd = new FormData(form)
        const urlEncoded = new URLSearchParams(fd).toString()
        console.log('Encoded data:', urlEncoded);

        fetch('http://localhost:8080/newuser',{
            method:'POST',
            body: urlEncoded,
            headers:{
                'Content-type':'application/x-www-form-urlencoded',
            }
        })
        .then(response => response.json()) 
        .then(data => {
            console.log('Success:', data);
        })
        .catch((error) => {
            console.error('Error:', error);
        });
      })
    </script>
</body>
</html>
